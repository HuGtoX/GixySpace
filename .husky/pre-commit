#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# è·å–æš‚å­˜åŒºå˜æ›´æ–‡ä»¶
changed_files=$(git diff --cached --name-only --diff-filter=ACM)

# æ£€æµ‹å­é¡¹ç›®å˜æ›´
run_task_for() {
  project_dir=$1
  if echo "$changed_files" | grep -q "^$project_dir/"; then
    echo "ğŸŸ¢ æ£€æµ‹åˆ° $project_dir å˜æ›´ï¼Œæ‰§è¡Œä»»åŠ¡..."
    (cd "$project_dir" && npm run lint)  # ä½¿ç”¨å­shellé¿å…ç›®å½•å½±å“
  fi
}

# ä¸ºéœ€è¦lintçš„é¡¹ç›®è§¦å‘ä»»åŠ¡
run_task_for "apps/frontend/tomato-tools"
