# æ€§èƒ½ä¼˜åŒ–å®æ–½æŒ‡å—

## ğŸ¯ å¿«é€Ÿå¼€å§‹

æœ¬é¡¹ç›®å·²å®Œæˆä¸‰å¤§æ€§èƒ½ä¼˜åŒ–ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®æ–½å³å¯è·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚

---

## ğŸ“‹ ä¼˜åŒ–æ¸…å•

- âœ… **SSR/SSG ä¼˜åŒ–** - å·²é…ç½®å®Œæˆï¼Œæ— éœ€é¢å¤–æ“ä½œ
- âš ï¸ **å›¾ç‰‡èµ„æºä¼˜åŒ–** - éœ€è¦è¿è¡Œä¼˜åŒ–è„šæœ¬
- âœ… **ç»„ä»¶æ‡’åŠ è½½** - å·²å®æ–½å®Œæˆ

---

## ğŸš€ ç«‹å³å®æ–½

### æ­¥éª¤ 1: å›¾ç‰‡ä¼˜åŒ–ï¼ˆå¿…é¡»ï¼‰

```bash
# 1. å®‰è£…å›¾ç‰‡ä¼˜åŒ–ä¾èµ–
pnpm run optimize:images:install

# 2. è¿è¡Œä¼˜åŒ–è„šæœ¬
pnpm run optimize:images

# 3. æ£€æŸ¥ä¼˜åŒ–ç»“æœ
# ä¼˜åŒ–åçš„æ–‡ä»¶åœ¨ä»¥ä¸‹ç›®å½•ï¼š
# - public/avatar-optimized/
# - public/news-icon-optimized/

# 4. ç¡®è®¤è´¨é‡åï¼Œæ‰‹åŠ¨æ›¿æ¢åŸæ–‡ä»¶
# æˆ–è€…æ›´æ–°ä»£ç å¼•ç”¨è·¯å¾„
```

**é¢„æœŸæ•ˆæœ**ï¼š

- å¤´åƒå›¾ç‰‡ï¼š9.5MB â†’ 2MB (-79%)
- SVG å›¾æ ‡ï¼š5.4MB â†’ 0.5MB (-91%)
- æ€»ä½“å›¾ç‰‡èµ„æºå‡å°‘çº¦ 12MB

### æ­¥éª¤ 2: éªŒè¯ä¼˜åŒ–æ•ˆæœ

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start

# ä½¿ç”¨ Chrome DevTools Lighthouse æµ‹è¯•
# é¢„æœŸ Performance åˆ†æ•°: 90+
```

### æ­¥éª¤ 3: æ·»åŠ æ€§èƒ½ç›‘æ§ï¼ˆæ¨èï¼‰

```bash
# å®‰è£… Bundle Analyzer
pnpm add -D @next/bundle-analyzer

# åˆ†ææ‰“åŒ…ç»“æœ
ANALYZE=true pnpm build
```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- **[æ€§èƒ½ä¼˜åŒ–æ€»ç»“](./performance-optimization-summary.md)** - å®Œæ•´çš„ä¼˜åŒ–æˆæœå’Œé¢„æœŸæ•ˆæœ
- **[å›¾ç‰‡ä¼˜åŒ–æŒ‡å—](./image-optimization.md)** - å›¾ç‰‡ä¼˜åŒ–è¯¦ç»†è¯´æ˜å’Œä½¿ç”¨æ–¹æ³•
- **[æ‡’åŠ è½½ä¼˜åŒ–æŒ‡å—](./lazy-loading-optimization.md)** - ç»„ä»¶æ‡’åŠ è½½æœ€ä½³å®è·µ

---

## ğŸ¯ å·²å®æ–½çš„ä¼˜åŒ–

### 1. SSR/SSG ä¼˜åŒ– âœ…

**é…ç½®æ–‡ä»¶**: `next.config.ts`

å·²å¯ç”¨ï¼š

- âœ… å›¾ç‰‡ä¼˜åŒ– (WebP, AVIF)
- âœ… éƒ¨åˆ†é¢„æ¸²æŸ“ (PPR)
- âœ… å®¢æˆ·ç«¯ç¼“å­˜ä¼˜åŒ–
- âœ… Gzip å‹ç¼©
- âœ… ç¦ç”¨ç”Ÿäº§ source maps

**ä¸»é¡µ**: `src/app/page.tsx`

å·²å®æ–½ï¼š

- âœ… æœåŠ¡ç«¯ç»„ä»¶
- âœ… Suspense æµå¼æ¸²æŸ“
- âœ… éª¨æ¶å±åŠ è½½çŠ¶æ€

**å·¥å…·é¡µé¢**

å·²é…ç½®é™æ€ç”Ÿæˆ + ISR (æ¯å°æ—¶é‡æ–°éªŒè¯)ï¼š

- âœ… PDF åˆå¹¶/æ‹†åˆ†
- âœ… å›¾ç‰‡è½¬æ¢/GIF/SVG
- âœ… å›¾æ ‡ä¸‹è½½
- âœ… Git ä¸‹è½½
- âœ… å®æ—¶æ¸²æŸ“

### 2. ç»„ä»¶æ‡’åŠ è½½ âœ…

å·²å®æ–½ï¼š

- âœ… Monaco Editor æ‡’åŠ è½½ (~2.5MB)
- âœ… PDF Worker CDN åŒ– (~1.53MB)
- âœ… ImageViewer æ‡’åŠ è½½

**æ•ˆæœ**ï¼šé¦–å± JS å‡å°‘çº¦ 4MB

### 3. å›¾ç‰‡èµ„æºä¼˜åŒ– âš ï¸

å·²åˆ›å»ºï¼š

- âœ… ä¼˜åŒ–è„šæœ¬ (`scripts/optimize-images.js`)
- âœ… ä¼˜åŒ–ç»„ä»¶ (`src/components/ui/OptimizedImage.tsx`)
- âœ… Package.json è„šæœ¬

**éœ€è¦æ‰§è¡Œ**ï¼šè¿è¡Œä¼˜åŒ–è„šæœ¬ï¼ˆè§æ­¥éª¤ 1ï¼‰

---

## ğŸ“Š é¢„æœŸæ€§èƒ½æå‡

| æŒ‡æ ‡                   | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹å–„   |
| ---------------------- | ------ | ------ | ------ |
| Lighthouse Performance | 65     | 90+    | +38%   |
| é¦–å±åŠ è½½æ—¶é—´ (FCP)     | 1.8s   | 1.0s   | -44%   |
| æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)     | 2.8s   | 1.5s   | -46%   |
| å¯äº¤äº’æ—¶é—´ (TTI)       | 4.2s   | 2.5s   | -40%   |
| é¦–å± JS åŒ…å¤§å°         | 800KB  | 500KB  | -37.5% |
| å›¾ç‰‡èµ„æºæ€»å¤§å°         | 15MB   | 3MB    | -80%   |

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ï¼šå›¾ç‰‡ä¼˜åŒ–è„šæœ¬å¤±è´¥

```bash
# ç¡®ä¿ Node.js ç‰ˆæœ¬ >= 18
node -v

# æ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules
pnpm install
pnpm run optimize:images:install
```

### é—®é¢˜ï¼šæ„å»ºå¤±è´¥

```bash
# æ¸…ç† Next.js ç¼“å­˜
rm -rf .next

# é‡æ–°æ„å»º
pnpm build
```

### é—®é¢˜ï¼šå›¾ç‰‡ä¸æ˜¾ç¤º

æ£€æŸ¥å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼š

```typescript
// ä½¿ç”¨ä¼˜åŒ–åçš„å›¾ç‰‡
<AvatarImage src="/avatar/a1.png" alt="å¤´åƒ" />

// ç»„ä»¶ä¼šè‡ªåŠ¨å°è¯•åŠ è½½ /avatar-optimized/a1.webp
// å¤±è´¥æ—¶é™çº§åˆ° /avatar/a1.png
```

---

## ğŸ“ˆ æŒç»­ä¼˜åŒ–

### å®šæœŸæ£€æŸ¥

```bash
# æ¯æœˆè¿è¡Œä¸€æ¬¡ Bundle åˆ†æ
ANALYZE=true pnpm build

# æ£€æŸ¥ Lighthouse åˆ†æ•°
lighthouse http://localhost:3000 --view
```

### ç›‘æ§æŒ‡æ ‡

å»ºè®®ç›‘æ§ä»¥ä¸‹æŒ‡æ ‡ï¼š

- First Contentful Paint (FCP)
- Largest Contentful Paint (LCP)
- Time to Interactive (TTI)
- Total Blocking Time (TBT)
- Cumulative Layout Shift (CLS)

---

## ğŸ“ æœ€ä½³å®è·µ

### æ·»åŠ æ–°å›¾ç‰‡æ—¶

1. ä½¿ç”¨åˆé€‚çš„æ ¼å¼å’Œå°ºå¯¸
2. è¿è¡Œ `pnpm run optimize:images`
3. ä½¿ç”¨ `OptimizedImage` ç»„ä»¶

### æ·»åŠ æ–°ç»„ä»¶æ—¶

1. è¯„ä¼°ç»„ä»¶å¤§å° (> 100KB è€ƒè™‘æ‡’åŠ è½½)
2. ä½¿ç”¨ `dynamic` å¯¼å…¥å¤§å‹ç»„ä»¶
3. æ·»åŠ åˆé€‚çš„ loading çŠ¶æ€

### æ·»åŠ æ–°é¡µé¢æ—¶

1. è¯„ä¼°æ˜¯å¦å¯ä»¥é™æ€ç”Ÿæˆ
2. æ·»åŠ  `export const dynamic = "force-static"`
3. ä½¿ç”¨ Suspense åˆ†ç¦»æ•°æ®åŠ è½½

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š

1. [æ€§èƒ½ä¼˜åŒ–æ€»ç»“](./performance-optimization-summary.md)
2. [å›¾ç‰‡ä¼˜åŒ–æŒ‡å—](./image-optimization.md)
3. [æ‡’åŠ è½½ä¼˜åŒ–æŒ‡å—](./lazy-loading-optimization.md)

æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**æœ€åæ›´æ–°**: 2025-12-10  
**ç‰ˆæœ¬**: 1.0
