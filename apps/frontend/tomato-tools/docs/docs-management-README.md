# 文档管理系统

## 📖 简介

文档管理系统是番茄工具箱管理后台的核心功能之一，提供了一个直观、高效的界面来浏览和管理项目中的Markdown技术文档。

## ✨ 核心特性

### 🎯 智能文档管理

- **自动读取**：自动扫描docs目录下的所有Markdown文件
- **智能分类**：根据文档标题自动推断分类
- **元数据提取**：自动提取标题、描述等信息
- **实时更新**：文档修改后刷新即可看到最新内容

### 🔍 强大的搜索功能

- **全文搜索**：搜索文档标题、描述和文件名
- **分类筛选**：按文档分类快速筛选
- **组合查询**：支持搜索和分类同时使用
- **实时响应**：搜索结果即时更新

### 👀 多种浏览方式

- **列表浏览**：按分类组织的文档列表
- **快速预览**：弹窗预览文档内容
- **详情页面**：完整展示文档，包含目录导航
- **统计概览**：文档数量、大小、更新时间等统计信息

### 🎨 优秀的用户体验

- **响应式设计**：完美适配桌面、平板和手机
- **深色模式**：支持深色主题，保护眼睛
- **流畅动画**：页面切换和交互动画流畅自然
- **代码高亮**：Markdown代码块语法高亮显示

## 🚀 快速开始

### 访问方式

```
http://localhost:3000/admin/docs
```

**注意**：需要管理员权限才能访问

### 基本使用

1. **浏览文档**：打开页面即可看到所有文档
2. **搜索文档**：在搜索框输入关键词
3. **筛选分类**：使用分类下拉菜单筛选
4. **预览文档**：点击"预览"按钮快速查看
5. **查看详情**：点击"查看详情"深度阅读

## 📁 项目结构

```
src/
├── app/
│   ├── api/
│   │   └── docs/
│   │       └── route.ts              # API路由
│   └── admin/
│       └── docs/
│           ├── page.tsx               # 文档列表页
│           └── [slug]/
│               └── page.tsx           # 文档详情页
├── components/
│   ├── auth/
│   │   └── AdminProtected.tsx         # 权限保护组件
│   └── ui/
│       ├── MarkdownRenderer.tsx       # Markdown渲染
│       └── MarkdownRenderer.css       # 样式文件
└── docs/
    ├── docs-management-guide.md       # 完整使用指南
    ├── docs-management-quick-start.md # 快速开始
    └── *.md                           # 其他文档
```

## 🔧 技术实现

### 技术栈

- **前端框架**：Next.js 15 (App Router)
- **UI组件**：Ant Design v5
- **Markdown渲染**：react-markdown + remark-gfm
- **代码高亮**：rehype-highlight
- **样式**：Tailwind CSS
- **日期处理**：dayjs

### API接口

#### 获取文档列表

```typescript
GET /api/docs
Query: search?, category?
```

#### 获取单个文档

```typescript
GET /api/docs?slug={slug}
```

### 文档分类

系统根据文档标题自动推断分类：

| 分类     | 关键词                     |
| -------- | -------------------------- |
| 快速开始 | quick, 快速, start         |
| API文档  | api, 接口                  |
| 使用指南 | guide, 指南, 教程          |
| 实现文档 | implementation, 实现, 开发 |
| 功能总结 | summary, 总结              |
| 数据库   | database, 数据库, schema   |
| 架构设计 | architecture, 架构         |
| 其他     | 其他                       |

## 📊 功能特点

### 1. 自动化处理

- ✅ 自动扫描docs目录
- ✅ 自动提取文档元数据
- ✅ 自动推断文档分类
- ✅ 自动生成文档目录

### 2. 智能搜索

- ✅ 支持中英文搜索
- ✅ 搜索标题、描述、文件名
- ✅ 实时搜索结果
- ✅ 支持组合筛选

### 3. 丰富的展示

- ✅ 文档列表视图
- ✅ 快速预览弹窗
- ✅ 完整详情页面
- ✅ 统计信息展示

### 4. 优秀的性能

- ✅ 按需加载文档内容
- ✅ 智能缓存机制
- ✅ 快速搜索响应
- ✅ 流畅的用户体验

## 🎯 使用场景

### 场景1：新成员快速了解项目

新加入的团队成员可以通过文档管理系统快速浏览项目的所有技术文档，了解项目架构、API接口、开发规范等。

### 场景2：查找特定功能文档

开发过程中需要查看某个功能的实现文档时，可以通过搜索快速定位到相关文档。

### 场景3：文档维护和更新

管理员可以方便地查看所有文档的更新时间，及时发现需要更新的文档。

### 场景4：技术分享和培训

可以将文档管理系统作为技术分享和培训的资料库，方便团队成员学习和参考。

## 📝 最佳实践

### 文档编写规范

1. **清晰的标题**：使用 `#` 标记，确保有明确的文档标题
2. **简洁的描述**：在标题后添加简短的描述段落
3. **合理的结构**：使用多级标题组织内容
4. **代码示例**：提供清晰的代码示例和注释
5. **相关链接**：添加相关文档的链接

### 文档命名规范

- 使用小写字母和连字符
- 描述性的文件名
- 例如：`feature-name-guide.md`

### 文档组织建议

1. **按功能分类**：相关文档使用相似的命名前缀
2. **保持更新**：及时更新文档内容
3. **添加索引**：在README中添加文档索引
4. **版本说明**：重要变更添加版本说明

## 🔐 安全性

### 权限控制

- ✅ 仅管理员可访问
- ✅ 使用AdminProtected组件保护
- ✅ 未授权访问自动重定向

### 路径安全

- ✅ API验证文件路径
- ✅ 防止目录遍历攻击
- ✅ 只读取docs目录下的文件

### 内容安全

- ✅ Markdown渲染过滤危险标签
- ✅ 使用rehype-raw安全处理HTML
- ✅ 代码高亮使用安全的库

## 🚀 扩展功能

### 可以添加的功能

1. **在线编辑**：支持在线编辑Markdown文档
2. **版本控制**：集成Git历史记录
3. **文档导出**：导出为PDF、Word等格式
4. **协作功能**：添加评论和讨论
5. **全文搜索**：集成Elasticsearch等搜索引擎
6. **文档统计**：查看文档阅读量、热门文档等
7. **标签系统**：支持自定义标签
8. **收藏功能**：收藏常用文档

## 📚 相关文档

- [快速开始指南](./docs-management-quick-start.md) - 5分钟快速上手
- [完整使用指南](./docs-management-guide.md) - 详细的功能说明和技术实现

## 🤝 贡献指南

欢迎贡献代码和文档！

### 如何贡献

1. Fork项目
2. 创建功能分支
3. 提交代码
4. 创建Pull Request

### 贡献内容

- 🐛 修复Bug
- ✨ 添加新功能
- 📝 完善文档
- 🎨 优化UI/UX
- ⚡ 性能优化

## 📄 许可证

本项目采用 MIT 许可证

## 💬 反馈与支持

如有问题或建议，欢迎：

- 提交Issue
- 发起Discussion
- 联系项目维护者

---

**番茄工具箱** - 让开发更高效 🍅
